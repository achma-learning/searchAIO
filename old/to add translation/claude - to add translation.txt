I'll enhance the language translation feature to match the bookmarklet's superior UX! Here are the improvements:

## üé® Enhanced Features

1. **Better Icon Styling** - Circular globe icon with proper CSS
2. **Search Bar with Autocomplete** - Search any language by name or code
3. **Improved Layout** - Original button spans full width, 6 main languages in 3x2 grid
4. **Hover Tooltips** - Show English names on hover
5. **Extended Language Support** - Search through 100+ languages

---

## üìù Complete Updated Code

Replace your **entire CSS section for language popup** (starting from `/* Language Popup - Enhanced Bookmarklet Style */`) with this:

```css
/* Language Icon Styling */
.lang-icon {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background: linear-gradient(135deg, #4285f4 0%, #34a853 100%);
  display: flex;
  justify-content: center;
  align-items: center;
  cursor: pointer;
  color: white;
  font-size: 20px;
  transition: all 0.3s ease;
  box-shadow: 0 2px 8px rgba(66, 133, 244, 0.3);
  user-select: none;
  border: none;
}

.lang-icon:hover {
  transform: translateY(-2px) scale(1.05);
  box-shadow: 0 4px 16px rgba(66, 133, 244, 0.5);
  background: linear-gradient(135deg, #3367d6 0%, #2d8f46 100%);
}

.lang-icon.language-selected {
  background: white;
  color: #4285f4;
  border: 2px solid #4285f4;
  font-weight: 700;
  font-size: 13px;
  font-family: 'Courier New', monospace;
  box-shadow: 0 2px 8px rgba(66, 133, 244, 0.4);
}

.lang-icon.language-selected:hover {
  background: #f8f9fa;
  border-color: #3367d6;
  color: #3367d6;
}

.dark-mode .lang-icon {
  background: linear-gradient(135deg, #1e3c72, #2a5298);
  box-shadow: 0 2px 8px rgba(30, 60, 114, 0.5);
}

.dark-mode .lang-icon:hover {
  background: linear-gradient(135deg, #2a5298, #3a6bb8);
}

.dark-mode .lang-icon.language-selected {
  background: #1a2332;
  color: #64b5f6;
  border-color: #64b5f6;
}

/* Language Popup - Enhanced Bookmarklet Style */
#langPopup {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.9);
  display: none;
  justify-content: center;
  align-items: center;
  z-index: 2000;
  padding: 20px;
  overflow: auto;
}

#langPopup.show {
  display: flex !important;
}

#langPopupContent {
  background: white;
  border-radius: 12px;
  box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
  padding: 30px;
  max-width: 500px;
  width: 100%;
  max-height: 100%;
  overflow: auto;
  position: relative;
  animation: popupSlideIn 0.3s ease;
}

.dark-mode #langPopupContent {
  background: #1a2332;
  border: 2px solid #2d3e52;
}

#langPopupContent .close-btn {
  position: absolute;
  top: 12px;
  right: 12px;
  width: 32px;
  height: 32px;
  border: none;
  background: #dc3545;
  color: white;
  border-radius: 50%;
  cursor: pointer;
  font-size: 20px;
  line-height: 1;
  padding: 0;
  transition: all 0.2s ease;
}

#langPopupContent .close-btn:hover {
  background: #c82333;
  transform: rotate(90deg);
}

#langPopupContent h2 {
  margin: 0 40px 20px 0;
  color: #333;
  font-size: 22px;
  padding-right: 40px;
}

.dark-mode #langPopupContent h2 {
  color: #64b5f6;
}

/* Search Bar with Autocomplete */
.lang-search-container {
  margin-bottom: 20px;
}

#langSearchInput {
  width: 100%;
  padding: 12px 15px;
  border: 2px solid #ddd;
  border-radius: 8px;
  font-size: 15px;
  box-sizing: border-box;
  outline: none;
}

#langSearchInput:focus {
  border-color: #4285f4;
}

.dark-mode #langSearchInput {
  background: #243447;
  border-color: #2d3e52;
  color: #b0bec5;
}

.dark-mode #langSearchInput:focus {
  border-color: #64b5f6;
}

#langSuggestions {
  margin-top: 8px;
  max-height: 200px;
  overflow-y: auto;
  border: 1px solid #e0e0e0;
  border-radius: 6px;
  display: none;
  background: white;
}

.dark-mode #langSuggestions {
  background: #243447;
  border-color: #2d3e52;
}

.lang-suggestion {
  padding: 10px 15px;
  cursor: pointer;
  border-bottom: 1px solid #f0f0f0;
  transition: background 0.2s ease;
}

.lang-suggestion:hover {
  background: #f0f4ff;
}

.dark-mode .lang-suggestion {
  border-bottom-color: #2d3e52;
}

.dark-mode .lang-suggestion:hover {
  background: #2c3e50;
}

.lang-suggestion strong {
  color: #333;
  font-weight: 600;
}

.lang-suggestion span {
  color: #888;
  font-size: 12px;
}

.dark-mode .lang-suggestion strong {
  color: #b0bec5;
}

.dark-mode .lang-suggestion span {
  color: #78909c;
}

/* Language Buttons Grid */
.lang-buttons-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 10px;
  margin-bottom: 15px;
}

.lang-btn {
  padding: 14px;
  background: #4285f4;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  font-size: 14px;
  font-weight: 500;
  transition: all 0.2s ease;
  position: relative;
}

.lang-btn:hover {
  background: #3367d6;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(66, 133, 244, 0.3);
}

.lang-btn[data-lang="original"] {
  grid-column: 1 / -1;
  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  font-size: 15px;
}

.lang-btn[data-lang="original"]:hover {
  background: linear-gradient(135deg, #5568d3 0%, #653a8c 100%);
}

.dark-mode .lang-btn {
  background: #1e3c72;
}

.dark-mode .lang-btn:hover {
  background: #2a5298;
}

.dark-mode .lang-btn[data-lang="original"] {
  background: linear-gradient(135deg, #1e3c72, #2a5298);
}

/* Tooltip for language names */
.lang-btn::after {
  content: attr(title);
  position: absolute;
  bottom: 100%;
  left: 50%;
  transform: translateX(-50%) translateY(-5px);
  background: rgba(0, 0, 0, 0.85);
  color: white;
  padding: 6px 10px;
  border-radius: 4px;
  font-size: 12px;
  white-space: nowrap;
  opacity: 0;
  pointer-events: none;
  transition: opacity 0.2s ease, transform 0.2s ease;
  z-index: 10;
}

.lang-btn:hover::after {
  opacity: 1;
  transform: translateX(-50%) translateY(-8px);
}

/* Info Footer */
.lang-info {
  text-align: center;
  margin: 0;
  color: #666;
  font-size: 12px;
}

.dark-mode .lang-info {
  color: #b0bec5;
}

.lang-info kbd {
  display: inline-block;
  padding: 2px 6px;
  background: #f4f4f4;
  border: 1px solid #ccc;
  border-radius: 3px;
  font-family: monospace;
}

.dark-mode .lang-info kbd {
  background: #243447;
  border-color: #455a64;
  color: #b0bec5;
}

/* Animation */
@keyframes popupSlideIn {
  from {
    opacity: 0;
    transform: scale(0.9);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

/* Mobile responsive */
@media (max-width: 768px) {
  .lang-buttons-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  #langPopupContent {
    padding: 24px;
    max-width: 95%;
  }
}

@media (max-width: 480px) {
  .lang-buttons-grid {
    grid-template-columns: 1fr;
  }
}
```

---

## üìù Updated HTML Structure

Replace the **entire `<!-- Language Selection Popup -->`** section with this:

```html
<!-- Language Selection Popup -->
<div id="langPopup" class="popup-overlay" style="display: none;">
  <div id="langPopupContent">
    <button class="close-btn" id="closeLangPopup">&times;</button>
    <h2>üåê Translate Page</h2>
    
    <!-- Search Bar with Autocomplete -->
    <div class="lang-search-container">
      <input 
        type="text" 
        id="langSearchInput" 
        placeholder="Type language name or code..." 
        autocomplete="off"
      />
      <div id="langSuggestions"></div>
    </div>
    
    <!-- Language Buttons -->
    <div class="lang-buttons-grid">
      <button class="lang-btn" data-lang="original" title="No Translation">
        üåê Original
      </button>
      <button class="lang-btn" data-lang="en" title="English">
        English
      </button>
      <button class="lang-btn" data-lang="fr" title="French">
        Fran√ßais
      </button>
      <button class="lang-btn" data-lang="ar" title="Arabic">
        ÿßŸÑÿπÿ±ÿ®Ÿäÿ©
      </button>
      <button class="lang-btn" data-lang="ru" title="Russian">
        –†—É—Å—Å–∫–∏–π
      </button>
      <button class="lang-btn" data-lang="es" title="Spanish">
        Espa√±ol
      </button>
      <button class="lang-btn" data-lang="zh" title="Chinese">
        ‰∏≠Êñá
      </button>
    </div>
    
    <p class="lang-info">Press <kbd>ESC</kbd> to close ‚Ä¢ Translation may not work for all engines</p>
  </div>
</div>
```

---

## üìù Updated JavaScript

Replace the **entire `// ============================================ // LANGUAGE TRANSLATION FEATURE`** section with this:

```javascript
// ============================================
// LANGUAGE TRANSLATION FEATURE
// ============================================

// Extended language database (100+ languages)
const allLanguages = {
  ar: 'Arabic', zh: 'Chinese', en: 'English', fr: 'French', ru: 'Russian', es: 'Spanish',
  de: 'German', ja: 'Japanese', pt: 'Portuguese', it: 'Italian', ko: 'Korean', nl: 'Dutch',
  tr: 'Turkish', pl: 'Polish', sv: 'Swedish', da: 'Danish', fi: 'Finnish', no: 'Norwegian',
  cs: 'Czech', hu: 'Hungarian', ro: 'Romanian', uk: 'Ukrainian', el: 'Greek', he: 'Hebrew',
  th: 'Thai', vi: 'Vietnamese', id: 'Indonesian', ms: 'Malay', hi: 'Hindi', bn: 'Bengali',
  ur: 'Urdu', fa: 'Persian', sw: 'Swahili', ta: 'Tamil', te: 'Telugu', mr: 'Marathi',
  pa: 'Punjabi', gu: 'Gujarati', kn: 'Kannada', ml: 'Malayalam', si: 'Sinhala', km: 'Khmer',
  lo: 'Lao', my: 'Burmese', ka: 'Georgian', am: 'Amharic', ne: 'Nepali', af: 'Afrikaans',
  sq: 'Albanian', hy: 'Armenian', az: 'Azerbaijani', eu: 'Basque', be: 'Belarusian',
  bs: 'Bosnian', bg: 'Bulgarian', ca: 'Catalan', hr: 'Croatian', et: 'Estonian',
  tl: 'Filipino', gl: 'Galician', is: 'Icelandic', ga: 'Irish', lv: 'Latvian',
  lt: 'Lithuanian', mk: 'Macedonian', mt: 'Maltese', mn: 'Mongolian', sr: 'Serbian',
  sk: 'Slovak', sl: 'Slovenian', cy: 'Welsh', yi: 'Yiddish', zu: 'Zulu', xh: 'Xhosa',
  sn: 'Shona', st: 'Sesotho', yo: 'Yoruba', ig: 'Igbo', ha: 'Hausa', ps: 'Pashto',
  sd: 'Sindhi', ug: 'Uyghur', ku: 'Kurdish', tg: 'Tajik', uz: 'Uzbek', kk: 'Kazakh',
  ky: 'Kyrgyz', tk: 'Turkmen', mg: 'Malagasy', ny: 'Chichewa', so: 'Somali',
  co: 'Corsican', fy: 'Frisian', gd: 'Scottish Gaelic', haw: 'Hawaiian', hmn: 'Hmong',
  lb: 'Luxembourgish', sm: 'Samoan', ceb: 'Cebuano', la: 'Latin', eo: 'Esperanto'
};

// Store selected language (default: original)
let selectedOutputLang = 'original';

// DOM references
const langIcon = document.getElementById('langIcon');
const langPopup = document.getElementById('langPopup');
const closeLangPopup = document.getElementById('closeLangPopup');
const langButtons = document.querySelectorAll('.lang-btn');
const langSearchInput = document.getElementById('langSearchInput');
const langSuggestions = document.getElementById('langSuggestions');

// Open language popup
function openLangPopup() {
  langPopup.classList.add('show');
  popupOverlay.classList.add('show');
  langSearchInput.focus();
}

// Close language popup
function closeLangPopupFn() {
  langPopup.classList.remove('show');
  langSearchInput.value = '';
  langSuggestions.style.display = 'none';
  
  // Only hide overlay if no other popups are open
  if (!filetypesPopup.classList.contains('show') &&
      !googleWikiPopup.classList.contains('show') &&
      !bingWikiPopup.classList.contains('show') &&
      !keyboardShortcutsPopup.classList.contains('show')) {
    popupOverlay.classList.remove('show');
  }
}

// Update icon based on selected language
function updateLangIcon(langCode) {
  selectedOutputLang = langCode;
  
  if (langCode === 'original') {
    langIcon.textContent = 'üåê';
    langIcon.classList.remove('language-selected');
    langIcon.title = 'Select output language';
  } else {
    langIcon.textContent = langCode.toUpperCase();
    langIcon.classList.add('language-selected');
    const langName = allLanguages[langCode] || langCode.toUpperCase();
    langIcon.title = `Translate to ${langName}`;
  }
  
  // Save to localStorage for persistence
  localStorage.setItem('selectedOutputLang', langCode);
}

// Search and autocomplete functionality
langSearchInput.addEventListener('input', function() {
  const query = this.value.toLowerCase().trim();
  
  if (!query) {
    langSuggestions.style.display = 'none';
    return;
  }
  
  // Filter languages by name or code
  const matches = Object.entries(allLanguages)
    .filter(([code, name]) => 
      code.includes(query) || name.toLowerCase().includes(query)
    )
    .slice(0, 10); // Limit to 10 results
  
  if (matches.length) {
    langSuggestions.innerHTML = matches
      .map(([code, name]) => `
        <div class="lang-suggestion" data-code="${code}">
          <strong>${name}</strong> <span>(${code})</span>
        </div>
      `)
      .join('');
    
    langSuggestions.style.display = 'block';
    
    // Add click handlers
    langSuggestions.querySelectorAll('.lang-suggestion').forEach(item => {
      item.addEventListener('click', () => {
        const code = item.getAttribute('data-code');
        updateLangIcon(code);
        closeLangPopupFn();
      });
    });
  } else {
    langSuggestions.style.display = 'none';
  }
});

// Event: Open popup on icon click
langIcon.addEventListener('click', (e) => {
  e.stopPropagation();
  openLangPopup();
});

// Event: Close popup on close button
closeLangPopup.addEventListener('click', closeLangPopupFn);

// Event: Close popup on overlay click
langPopup.addEventListener('click', (e) => {
  if (e.target === langPopup) {
    closeLangPopupFn();
  }
});

// Event: Language selection
langButtons.forEach(btn => {
  btn.addEventListener('click', () => {
    const lang = btn.getAttribute('data-lang');
    updateLangIcon(lang);
    closeLangPopupFn();
  });
});

// Update existing ESC key handler to close lang popup
document.addEventListener('keydown', (e) => {
  if (e.key === 'Escape') {
    if (langPopup.classList.contains('show')) {
      closeLangPopupFn();
    }
  }
});

// Restore saved language preference on page load
window.addEventListener('load', () => {
  const savedLang = localStorage.getItem('selectedOutputLang');
  if (savedLang) {
    updateLangIcon(savedLang);
  }
});
```

---

## ‚ú® What's New?

### 1. **Beautiful Circular Icon**
- Gradient background when inactive
- Shows language code when selected
- Smooth hover effects

### 2. **Smart Search Bar**
- Type any language name or code
- Real-time autocomplete
- 100+ languages supported

### 3. **Improved Layout**
- "Original" button spans full width
- 6 main languages in 3√ó2 grid
- Native language names displayed

### 4. **Hover Tooltips**
- English name appears on hover
- Smooth fade-in animation

### 5. **Extended Language Database**
- 100+ languages searchable
- Includes all major world languages
- Google Translate language codes

---

## üß™ Testing

1. **Click the üåê icon** ‚Üí Beautiful popup opens
2. **Search "german"** ‚Üí Autocomplete shows "German (de)"
3. **Hover over "–†—É—Å—Å–∫–∏–π"** ‚Üí Tooltip shows "Russian"
4. **Select a language** ‚Üí Icon changes to "DE", "FR", etc.
5. **Perform a search** ‚Üí Results open in Google Translate

---

This matches the bookmarklet's excellent UX while keeping your vanilla JavaScript architecture! üöÄ